<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
    		<!-- Fees Receipt Form -->
		<record id="pappaya_fees_refund_form" model="ir.ui.view">
		    <field name="name">pappaya.fees.refund.form</field>
		    <field name="model">pappaya.fees.refund</field>
		    <field name="arch" type="xml">
			 <form string="Fees Refund"  create="false" duplicate="0" edit="false">
			     <sheet>
			     <group col="4" colspan="4">
                            <button name="generate_refund_receipt_report" type="object" string="Print" class="oe_highlight"/>
                 </group>
				<group col="4" colspan="4">
				    <field name="society_id" options="{'no_open': True,'no_create':True}" domain="[('type','=','society')]"/>
				    <field name="school_id" options="{'no_open': True,'no_create':True}" domain="[('type','=','school'),('parent_id','=',society_id)]"/>
				    <field name="academic_year_id" domain="[('school_id', '=', school_id)]" options="{'no_open': True,'no_create':True}" />
				    <field name="grade_id" options="{'no_open': True,'no_create':True}" />
				    <field name="student_id" placeholder="Student Name" options="{'no_open': True,'no_create':True}" domain="[('school_id', '=', school_id),('grade_id', '=', grade_id)]" />
				    <field name="enrollment_number"/>
				    <field name="refund_date"/>
				</group>
				<group col="4">
				    <field name="fee_refund_line" nolabel="1" colspan="4">
					<tree string ="Fees Refund">
						<field name="name" readonly="1"/>
						<field name="term_divide" readonly="1"/>
						<field name="amount" readonly="1"/>
					</tree>
					<form string = "Fees Collection">
						<group col="4" colspan="4">
							<field name="name" />
							<field name="term_divide" />
							<field name="amount"/>
						</group>
					</form>
				    </field>
				</group>
				<group>
                        <group class="oe_subtotal_footer oe_right" colspan="2" name="sale_total">
                            <div class="oe_subtotal_footer_separator oe_inline o_td_label">
                                <label for="total" />
                            </div>
                            <field name="total" nolabel="1" class="oe_subtotal_footer_separator" />
                        </group>
                </group>
				 <group col="2" colspan="2">
                            <field name="payment_mode" readonly="1"/>
                            <field name="cheque_dd" readonly="1"/>
                            <field name="bank_name" readonly="1"/>
                            <field name="remarks" readonly="1"/>
                 </group>
				
				
			     </sheet>
			 </form>
		    </field>
		</record>
		
		
		<!-- Fees Refund Tree -->
		
		<record id="pappaya_fees_refund_tree" model="ir.ui.view">
			<field name="name">pappaya.fees.refund.tree</field>
			<field name="model">pappaya.fees.refund</field>
			<field name="priority" eval="5" />
			<field name="arch" type="xml">
				<tree string="Fees Refund" create="false" edit="false">
				    <field name="society_id" />
				    <field name="school_id"/>
				    <field name="grade_id"/>
				    <field name="enrollment_number"/>
				    <field name="student_id"/>
				    <field name="refund_date"/>
				</tree>
			</field>
		</record>
		
		
		<record id="pappaya_fees_refund_search" model="ir.ui.view">
            <field name="name">pappaya.fees.refund.search</field>
            <field name="model">pappaya.fees.refund</field>
            <field name="priority" eval="8" />
            <field name="arch" type="xml">
                <search string="Fees Refund">
                    <field name="society_id" />
				    <field name="school_id"/>
				    <field name="grade_id"/>
				    <field name="enrollment_number"/>
				    <field name="student_id"/>
				    <field name="refund_date"/>
                    <newline />
					<group expand="0" string="Group By...">
                        <filter string="Society" domain="[]" context="{'group_by':'society_id'}" />
						<filter string="School" domain="[]" context="{'group_by':'school_id'}" />
						<filter string="Academic Year" domain="[]" context="{'group_by':'academic_year_id'}"/>
						<filter string="Class" domain="[]" context="{'group_by':'grade_id'}"/>
                    </group>
                </search>
            </field>
        </record>
		
		
		<!-- Fees Refund Windows Action -->
		<record model="ir.actions.act_window" id="action_pappaya_fees_refund_id">
			<field name="name">Fees Management > Fees Refund</field>
			<field name="res_model">pappaya.fees.refund</field>
			<field name="view_mode">tree,form</field>
		</record>
    </data>
</odoo>
