<?xml version="1.0" encoding="utf-8"?>
<openerp>
	<data>


		<record id="pappaya_rte_reimbursment_tree_view" model="ir.ui.view">
			<field name="name">pappaya_rte_reimbursment_tree</field>
			<field name="model">pappaya.rte.reimbursment</field>
			<field name="arch" type="xml">
				<tree string="RTE Fees Reimbursment">
					<field name="society_id" />
					<field name="school_id" />
					<field name="academic_year_id" />
				</tree>
			</field>
		</record>

		<!-- Rte Fee Reimbursment Form -->
		<record id="pappaya_rte_reimbursment_form" model="ir.ui.view">
			<field name="name">pappaya.rte.reimbursment.form</field>
			<field name="model">pappaya.rte.reimbursment</field>
			<field name="arch" type="xml">
				<form string="RTE Reimbursment Form " duplicate="0">
					<sheet>
						<group>
							<group>
								<field name="society_id" options="{'no_open': True,'no_create':True}"
									domain="[('type','=','society')]" class="asterik"
									attrs="{'readonly':[('rte_pay' ,'=' ,True)]}" />
								<field name="school_id" options="{'no_open': True,'no_create':True}"
									domain="[('type','=','school'),('parent_id','=',society_id)]"
									required="1" class="asterik" attrs="{'readonly':[('rte_pay' ,'=' ,True)]}" />
								<field name="academic_year_id" domain="[('school_id', '=', school_id)]"
									options="{'no_open': True,'no_create':True}" attrs="{'readonly':[('rte_pay' ,'=' ,True)]}" />
								<field name="date" />
								<field name="pay_fees" />
								<!-- <field name="rte_refund_fees" /> -->
							</group>
							<group>
								<field name="total_cal" />
								<field name="pending_amt" />
								<label for="paid_amt" />
								<div class="btn-inline">
									<field name="paid_amt" />
									<button name="fee_rte_process" string="Confirm"
										class="oe_highlight oe_inline" type="object"
										attrs="{'invisible':[('pay_fees' ,'=' ,False)]}" confirm="Please check your pay amount before you proceed.!" />
								</div>
								<field name="rte_pay" invisible="1" />
							</group>
						</group>
				

						
						<group>
							<field name="rte_fee_reimbursment" nolabel="1" class="fixed_table"
								options="{'no_open': True,'no_create':True}" attrs="{'readonly':[('rte_pay' ,'=' ,True)]}">
								<tree editable="bottom" create="false" open="false" delete="false">
									<field name="no_of_rte" readonly="1" />
									<field name="grade_id" readonly="1"
										options="{'no_open': True,'no_create':True}" />
									<field name="actual_fee" style="width: 170px;" />
									<field name="book_fee" />
									<field name="dress_fees" />
									<field name="total_fees_student" />
									<field name="total_amt" />
								</tree>
							</field>
						</group>
						<table class="fixed_table oe_list_content">
							<tr width="100%">

								<td width="20%"></td>
								<td width="20%"></td>
								<td width="20%"></td>
								<td width="20%"></td>
								<td width="20%"></td>
								<td width="20%" style="text-align:right;">Total Amount</td>
								<td width="20%" class="oe_number">
									<field name="total_amt" />
								</td>
							</tr>
						</table>

						<group col="2" colspan="2"
							attrs="{'invisible':[('pay_fees' ,'=' ,False)]}">
							<group col="4" colspan="4">
								<field name="payment_mode" attrs="{'required':[('pay_fees' ,'=' ,True)]}"
									class="asterik" />
								<!-- <field name="file" attrs="{'required':[('pay_fees' ,'=' ,True)]}"
									class="asterik" filename="filename"/>
									
								<field name="filename" invisible="1" /> -->
								<label for="rte_receipt_attachments" />
                                <div>
                                    <field name="rte_receipt_attachments" attrs="{'required':[('pay_fees' ,'=' ,True)]}" widget="many2many_binary" string="Upload" class="oe_inline" />
                                </div>
									
							</group>
							
							<field name="cheque_dd" class="asterik"
								attrs="{'invisible':[('payment_mode' ,'=' ,'cash')],'required':[('payment_mode' ,'!=' ,'cash'),('pay_fees' ,'=' ,True)]}" />
							<field name="bank_name" class="asterik"
								attrs="{'invisible':[('payment_mode' ,'=' ,'cash')],'required':[('payment_mode' ,'!=' ,'cash'),('pay_fees' ,'=' ,True)]}" />
							<field name="remarks" />
						</group>
						<group>
						<field name="view_student"/>
						</group>
						<group  name="students" attrs="{'invisible':[('view_student' ,'=' ,False)]}">
							<field name="rte_students_list" nolabel="1" >
								<tree create="false" delete="false" open="false">
									<field name="enrollment_num" />
									<field name="full_name" />
									<field name="birth_date" string="Date of Birth"/>
									<field name="grade_id" />
								</tree>
							</field>
						</group>
						
						<group string="Recevied History">
							<field name="rte_received_line_ids" nolabel="1"
								options="{'no_open': True,'no_create':True}">
								<tree create="false" delete="false">
									<field name="received_date" readonly="1"/>
									<field name="payment_mo" readonly="1"/>
									<field name="rte_receipt_attachments" widget="many2many_binary" class="oe_inline" />
									<field name="received_amt" readonly="1"/>
									<field name="remarks" readonly="1"/>
								</tree>
								<form>
	                                <group>
										<field name="received_date" readonly="1"/>
										<field name="payment_mo" readonly="1"/>
										<field name="rte_receipt_attachments" widget="many2many_binary" class="oe_inline"/>
										<field name="received_amt" readonly="1"/>
										<field name="remarks" readonly="1"/>
									</group>
                               	</form>
							</field>
						</group>
					</sheet>
				</form>
			</field>
		</record>


		<record id="pappaya_rte_reimbursment_tree_view" model="ir.ui.view">
			<field name="name">pappaya_rte_reimbursment_tree</field>
			<field name="model">pappaya.rte.reimbursment</field>
			<field name="arch" type="xml">
				<tree string="RTE Fees Reimbursment">
					<field name="society_id" />
					<field name="school_id" />
					<field name="academic_year_id" />
				</tree>
			</field>
		</record>

		<record id="pappaya_rte_reimbursment_search" model="ir.ui.view">
			<field name="name">pappaya_rte_reimbursment_search</field>
			<field name="model">pappaya.rte.reimbursment</field>
			<field name="arch" type="xml">
				<search string="Reimbursment">
					<field name="society_id" />
					<field name="school_id" />
					<field name="academic_year_id" />
					<newline />
					<group expand="0" string="Group By...">
						<filter string="Society" domain="[]" context="{'group_by':'society_id'}" />
						<filter string="School" domain="[]" context="{'group_by':'school_id'}" />
						<filter string="Academic Year" domain="[]"
							context="{'group_by':'academic_year_id'}" />
					</group>
				</search>
			</field>
		</record>


		<record model="ir.actions.act_window" id="action_pappaya_rte_reimbursment_id">
			<field name="name">Fees Management > RTE Reimbursment</field>
			<field name="res_model">pappaya.rte.reimbursment</field>
			<field name="view_mode">tree,form</field>
		</record>




	</data>
</openerp>
